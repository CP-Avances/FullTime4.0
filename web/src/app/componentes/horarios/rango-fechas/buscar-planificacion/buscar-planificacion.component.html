<!-- *** VENTANA DE REGISTRO INDIVDUAL DE PLANIFICACION *** -->
<div style="padding-top: 20px; padding-bottom: 8px;" *ngIf="ventana_horario_individual">
    <app-registo-empleado-horario [data_horario]="data_horario">
    </app-registo-empleado-horario>
</div>

<!-- *** VENTANA DE BUSQUEDA DE PLANIFICACIONES *** -->
<div style="padding-top: 20px;" *ngIf="seleccionar">
    <div id="resultados">
        LISTAR PLANIFICACIONES HORARIAS
        <mat-icon class="float-right" id="cerrar" (click)="CerrarBuscar()">highlight_off</mat-icon>
    </div>
    <mat-card class="example-card mat-elevation-z9">
        <mat-card-content>
            <div *ngIf="buscar_fechas">
                <div class="row">
                    <div class="nota" id="fuente_" style="margin-left: 15px;">
                        <span>
                            NOTA: Al Cargar Planificación se visualizará la planificación del mes actual. Para una
                            búsqueda personalizada ingresar mes de inicio y fin de periodo.
                        </span>
                    </div>
                    <div class="col-md">
                        <div class="d-flex flex-wrap justify-content-center">
                            <mat-form-field>
                                <mat-label>Mes inicio</mat-label>
                                <input matInput [matDatepicker]="fec1" [formControl]="fechaInicialF"
                                    placeholder="MM/YYYY">
                                <mat-datepicker-toggle matIconSuffix [for]="fec1"></mat-datepicker-toggle>
                                <mat-datepicker #fec1 startView="year" (monthSelected)="FormatearFecha($event, fec1, 1)"
                                    touchUi>
                                </mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col-md">
                        <div class="d-flex flex-wrap justify-content-center">
                            <mat-form-field>
                                <mat-label>Mes final</mat-label>
                                <input matInput [matDatepicker]="fec2" [formControl]="fechaFinalF"
                                    placeholder="MM/YYYY">
                                <mat-datepicker-toggle matIconSuffix [for]="fec2"
                                    [disabled]="fecHorario"></mat-datepicker-toggle>
                                <mat-datepicker #fec2 startView="year" (monthSelected)="FormatearFecha($event, fec2, 2)"
                                    touchUi>
                                </mat-datepicker>
                            </mat-form-field>
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-wrap justify-content-center">
                    <button id="btn-raised" class="btn btn-sm" (click)="VerPlanificacion()">
                        Cargar Planificacion
                    </button>
                </div>
                <hr>
            </div>


            <!-- *********************** TABLA DE DETALLES DE HORARIOS Y DEFINICIONES ******************************* -->
            <div class="container" style="padding-bottom: 25px;" *ngIf="ver_acciones">
                <div class="row">
                    <div class="col-md">
                        <div class="mat-elevation-z8" style="background: white;">
                            <div class="d-flex bd-highlight" id="resultados">
                                <span class="w-100 bd-highlight">
                                    DETALLE DE HORARIOS
                                </span>
                            </div>
                            <div class="table-responsive" style="text-align: center;">
                                <table id="table_acciones" class="table table-hover table-sm" style="margin: 0 auto;">
                                    <thead class="thead-light">
                                        <tr style="text-align: center;">
                                            <th scope="col" id="td_horarios">HORARIO</th>
                                            <th scope="col" id="td_horarios">ENTRADA (E)</th>
                                            <th scope="col" id="td_horarios">INICIO ALIMENTACIÓN (I/A)</th>
                                            <th scope="col" id="td_horarios">FIN ALIMENTACIÓN (F/A)</th>
                                            <th scope="col" id="td_horarios">SALIDA (S)</th>
                                        </tr>
                                    </thead>
                                    <tbody *ngIf="paginar">
                                        <tr
                                            *ngFor="let d of detalle_acciones | paginate:tamanio_paginaD:numero_paginaD">
                                            <td id="td_horarios">{{d.horario}}</td>
                                            <td id="td_horarios">{{d.entrada_}}</td>
                                            <td id="td_horarios">{{d.inicio_comida}}</td>
                                            <td id="td_horarios">{{d.fin_comida}}</td>
                                            <td id="td_horarios">{{d.salida_}}</td>
                                        </tr>
                                    </tbody>
                                    <tbody *ngIf="!paginar">
                                        <tr *ngFor="let d of detalle_acciones">
                                            <td id="td_horarios">{{d.horario}}</td>
                                            <td id="td_horarios">{{d.entrada_}}</td>
                                            <td id="td_horarios">{{d.inicio_comida}}</td>
                                            <td id="td_horarios">{{d.fin_comida}}</td>
                                            <td id="td_horarios">{{d.salida_}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <mat-paginator *ngIf="paginar" id="pagina" [length]="detalle_acciones.length"
                                [pageSize]="tamanio_paginaD" [pageSizeOptions]="pageSizeOptionsD"
                                (page)="ManejarPaginaDetalles($event)" showFirstLastButtons>
                            </mat-paginator>
                        </div>
                    </div>
                    <div class="col-md">
                        <div class="mat-elevation-z8" style="background: white;">
                            <div class="d-flex bd-highlight" id="resultados">
                                <span class="w-100 bd-highlight">
                                    DEFINICIONES
                                </span>
                                <mat-icon class="float-right" id="cerrar_"
                                    (click)="CerrarDetalles()">highlight_off</mat-icon>
                            </div>
                            <div class="table-responsive" style="text-align: center;">
                                <table id="table_acciones" class="table table-hover table-sm" style="margin: 0 auto;">
                                    <thead class="thead-light">
                                        <tr style="text-align: center;">
                                            <th scope="col" id="td_horarios">NOMENCLATURA</th>
                                            <th scope="col" id="td_horarios">DESCRIPCIÓN</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let n of nomenclatura">
                                            <td id="td_horarios">{{n.nombre}}</td>
                                            <td id="td_horarios">{{n.descripcion}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TABLA PARA EMPLEADOS -->
            <div class="mat-elevation-z8" style="background: white;">
                <div class="d-flex bd-highlight" id="resultados">
                    <button *ngIf="multiple" class="btn btn-outline-light btn-sm"
                        style="float: left; margin-right: 10px;" (click)="ObtenerDetallesPlanificacion()">
                        Ver detalle
                    </button>
                    <span class="w-100 bd-highlight">
                        RESULTADO PLANIFICACIONES
                    </span>
                    <button *ngIf="multiple" class="btn btn-outline-light btn-sm"
                        style="float: right; margin-right: 10px;" (click)="PlanificarMultiple()">
                        Planificar
                    </button>
                </div>
                <div class="table-responsive">
                    <table id="table_horario" class="table table-hover table-sm">
                        <thead class="thead-light">
                            <tr style="text-align: center;">
                                <th scope="col" id="td_horarios" rowspan="2">CÓDIGO</th>
                                <th scope="col" id="td_horarios" rowspan="2">USUARIO</th>
                                <th scope="col" id="td_horarios" rowspan="2">AÑO</th>
                                <th scope="col" id="td_horarios" rowspan="2">MES</th>
                                <th scope="col" id="td_horarios" colspan="31">DÍAS DEL MES</th>
                                <th scope="col" id="td_horarios" rowspan="2">CÓDIGO</th>
                                <th scope="col" id="td_horarios" rowspan="2">ACCIONES</th>
                            </tr>
                            <tr style="text-align: center;">
                                <th scope="col" id="td_horarios">01</th>
                                <th scope="col" id="td_horarios">02</th>
                                <th scope="col" id="td_horarios">03</th>
                                <th scope="col" id="td_horarios">04</th>
                                <th scope="col" id="td_horarios">05</th>
                                <th scope="col" id="td_horarios">06</th>
                                <th scope="col" id="td_horarios">07</th>
                                <th scope="col" id="td_horarios">08</th>
                                <th scope="col" id="td_horarios">09</th>
                                <th scope="col" id="td_horarios">10</th>
                                <th scope="col" id="td_horarios">11</th>
                                <th scope="col" id="td_horarios">12</th>
                                <th scope="col" id="td_horarios">13</th>
                                <th scope="col" id="td_horarios">14</th>
                                <th scope="col" id="td_horarios">15</th>
                                <th scope="col" id="td_horarios">16</th>
                                <th scope="col" id="td_horarios">17</th>
                                <th scope="col" id="td_horarios">18</th>
                                <th scope="col" id="td_horarios">19</th>
                                <th scope="col" id="td_horarios">20</th>
                                <th scope="col" id="td_horarios">21</th>
                                <th scope="col" id="td_horarios">22</th>
                                <th scope="col" id="td_horarios">23</th>
                                <th scope="col" id="td_horarios">24</th>
                                <th scope="col" id="td_horarios">25</th>
                                <th scope="col" id="td_horarios">26</th>
                                <th scope="col" id="td_horarios">27</th>
                                <th scope="col" id="td_horarios">28</th>
                                <th scope="col" id="td_horarios">29</th>
                                <th scope="col" id="td_horarios">30</th>
                                <th scope="col" id="td_horarios">31</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let e of horariosEmpleado | paginate:tamanio_pagina_emp:numero_pagina_emp">
                                <td id="td_horarios">{{e.codigo_e}}</td>
                                <td id="td_horarios">{{e.nombre_e}}</td>
                                <td id="td_horarios">{{e.anio}}</td>
                                <td id="td_horarios">{{e.mes}}</td>
                                <td id="td_horarios">{{e.dia1}}</td>
                                <td id="td_horarios">{{e.dia2}}</td>
                                <td id="td_horarios">{{e.dia3}}</td>
                                <td id="td_horarios">{{e.dia4}}</td>
                                <td id="td_horarios">{{e.dia5}}</td>
                                <td id="td_horarios">{{e.dia6}}</td>
                                <td id="td_horarios">{{e.dia7}}</td>
                                <td id="td_horarios">{{e.dia8}}</td>
                                <td id="td_horarios">{{e.dia9}}</td>
                                <td id="td_horarios">{{e.dia10}}</td>
                                <td id="td_horarios">{{e.dia11}}</td>
                                <td id="td_horarios">{{e.dia12}}</td>
                                <td id="td_horarios">{{e.dia13}}</td>
                                <td id="td_horarios">{{e.dia14}}</td>
                                <td id="td_horarios">{{e.dia15}}</td>
                                <td id="td_horarios">{{e.dia16}}</td>
                                <td id="td_horarios">{{e.dia17}}</td>
                                <td id="td_horarios">{{e.dia18}}</td>
                                <td id="td_horarios">{{e.dia19}}</td>
                                <td id="td_horarios">{{e.dia20}}</td>
                                <td id="td_horarios">{{e.dia21}}</td>
                                <td id="td_horarios">{{e.dia22}}</td>
                                <td id="td_horarios">{{e.dia23}}</td>
                                <td id="td_horarios">{{e.dia24}}</td>
                                <td id="td_horarios">{{e.dia25}}</td>
                                <td id="td_horarios">{{e.dia26}}</td>
                                <td id="td_horarios">{{e.dia27}}</td>
                                <td id="td_horarios">{{e.dia28}}</td>
                                <td id="td_horarios">{{e.dia29}}</td>
                                <td id="td_horarios">{{e.dia30}}</td>
                                <td id="td_horarios">{{e.dia31}}</td>
                                <td id="td_horarios">{{e.codigo_e}}</td>
                                <td id="td_horarios">
                                    <i (click)="PlanificarIndividual(e)" id="plan" *ngIf="auto_individual"
                                        class="fa fa-calendar" matSuffix matTooltipPosition="right"
                                        matTooltip="Abrir formulario de registro de horarios.">
                                        <p>Planificar</p>
                                    </i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <mat-paginator id="pagina" [length]="horariosEmpleado.length" [pageSize]="tamanio_pagina_emp"
                    [pageSizeOptions]="pageSizeOptions_emp" (page)="ManejarPaginaResultados($event)"
                    showFirstLastButtons>
                </mat-paginator>
                <br>
            </div>
        </mat-card-content>
    </mat-card>
</div>

<!-- *** VENTANA DE REGISTRO DE MULTIPLES PLANIFICACIONES *** -->
<div style="padding-top: 20px; padding-bottom: 8px;" *ngIf="asignar_multiple">
    <app-horarios-multiples [seleccionados]="seleccionados" pagina="buscar">
    </app-horarios-multiples>
</div>